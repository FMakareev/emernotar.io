<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: modules/verify/view/verify/index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: modules/verify/view/verify/index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, {Component, Fragment} from 'react';
import {getTranslate, getActiveLanguage} from 'react-localize-redux';
import {connect} from "react-redux";
import {connect as connectFela} from 'react-fela';

import {Container} from "../../../../blocks/container/index";
import {Row} from "../../../../blocks/row/index";
import {Column} from "../../../../blocks/column/index";
import {Top} from "../../../../components/top/index";
import {TopLabel, TopLabelRow} from "../../../../components/topLabel/index";
import {Typography} from "../../../../blocks/typography/index";
import {Image} from "../../../../blocks/image/index";
import {Button} from "../../../../blocks/button/index";
import {Link} from 'react-router-dom';
import qp from 'query-parse';
import iconHome from '../../../../assets/icons/icon_home.svg';
import iconNotar from '../../../../assets/icons/icon_notorize-black.svg';
import iconVerify from '../../../../assets/icons/icon_verify.svg';

import VerifyModal from "./verify_modal";

import gql from 'graphql-tag';
import VerifyCertificatList from "./verify_certificat-list";


const certificate = gql`query certificate($hash: String){
    certificate(hash: $hash){
        emerhash 
    }
}`;


    /**
     * @description Get hash and returns list of notarization file with the same hash or no, if there are not. 
     * @returns List of notarization file with the same hash, if there are.
     * @memberof Verify
     */

class VerifyPage extends Component {
    static propTypes = {
        /** @property {func} translate   */
        translate: PropTypes.func,
        /** @property {shape} shape   */
        styles: PropTypes.shape({
            topLabel: PropTypes.string,
            topLabelIcon: PropTypes.string,
        }),
        /** @property {string} hash   */
        hash: PropTypes.string
    }

    static defaultProps = {
        match: {
            params: {
                hash: null,
            },
        }
    };
    
    constructor(props) {
        super(props);
        this.state = this.initialState;
        this.onModalToggle = this.onModalToggle.bind(this);
    }

    get initialState() {
        if (!process.env.isBrowser) {
            return {
                open: false,
                hasError: false,
                preLoader: false,
            }
        }
        return {
            open: false,
            hasError: false,
            hash: qp.toObject(window.location.search.substring(1)).hash,
        }
    }

    onModalToggle(open) {
        console.log(open);
        this.setState({open})
    }

    componentDidMount() { }

    render() {
        const {translate, styles} = this.props;
        const {open} = this.state;
        return (
            &lt;Fragment>
                &lt;Top paddingBottom={'9rem'}>
                    {translate('verify_verify')}
                &lt;/Top>
                &lt;Container>
                    &lt;Row>
                        &lt;Column>
                            &lt;TopLabelRow>
                                &lt;TopLabel
                                    as={'div'} isActive>
                                    &lt;Typography styles={{margin: '0 0 2rem 0'}} as={'h2'} size={'large'}
                                                fontWeight={'bold'} textAlign={'center'}
                                                color={'secondary'} bright={'contrastText'}>
                                        {translate('verify_file_hash')}
                                    &lt;/Typography>
                                    &lt;Image
                                        className={styles.topLabelIcon}
                                        src={iconVerify}
                                    />
                                    &lt;Row justifyContent={'spaceBetween'}>
                                        &lt;Column styles={{display: 'inline-block'}}>
                                            &lt;Link to='/' styles={{textDecoration: 'none'}}>
                                                &lt;Button variant={'raised'} color={'primary'}>
                                                    &lt;Image src={iconHome} styles={{padding: '0.2rem'}}/>
                                                    &lt;Typography as={'p'} size={'small'} textDecoration={'none'}
                                                                color={'secondary'} bright={'contrastText'}>
                                                        {translate('verify_home')}
                                                    &lt;/Typography>
                                                &lt;/Button>
                                            &lt;/Link>
                                        &lt;/Column>
                                        &lt;Column styles={{display: 'inline-block'}}>
                                            &lt;Button onClick={() => this.onModalToggle(true)} variant={'raised'}
                                                    color={'primary'}>
                                                &lt;Image src={iconNotar} styles={{padding: '0.2rem', height: '2.3rem'}}/>
                                                &lt;Typography as={'p'} size={'small'}
                                                            color={'secondary'} bright={'contrastText'}
                                                            styles={{marginRight: '0.5rem'}}>
                                                    {translate('verify_notarize')}
                                                &lt;/Typography>
                                            &lt;/Button>
                                        &lt;/Column>
                                    &lt;/Row>
                                &lt;/TopLabel>
                            &lt;/TopLabelRow>
                        &lt;/Column>
                    &lt;/Row>
                &lt;/Container>
                &lt;Container styles={{maxWidth: '768px !important', marginBottom: '5rem', marginTop: '-5rem'}}>
                    &lt;Row>
                        &lt;Column>
                            {
                                this.props.match.params.hash &amp;&amp;
                                &lt;Query query={certificateList} variables={{name: this.props.match.params.hash}}
                                       ssr={__SSR_FETCH__}>
                                    {
                                        ({loading, error, data}) => {
                                            console.log(loading, error, data);

                                            if (loading) {
                                                return (&lt;PreLoader palette={'dark'}/>);
                                            }
                                            if (error) {
                                                return (&lt;Typography
                                                    as={'p'}
                                                    size={'medium'}
                                                    color={'error'}
                                                    bright={'dark'}
                                                    fontWeight={'bold'}
                                                    textAlign={'center'}
                                                >
                                                    {translate('home_network_error')}
                                                &lt;/Typography>)
                                            }
                                            if (data.certificateList &amp;&amp; data.certificateList.length) {

                                                return (
                                                    &lt;Fragment>
                                                        &lt;Typography
                                                            as={'h3'}
                                                            size={'large'}
                                                            fontWeight={'bold'}
                                                            textAlign={'center'}
                                                        >
                                                            {translate('verify_file_is_not_unique')}&lt;br/>
                                                            {translate('verify_matches_found')}: {data.certificateList.length}
                                                        &lt;/Typography>

                                                        {
                                                            data.certificateList.map((data, index) => &lt;VerifyItem
                                                                data={data} key={`VerifyItem-${index}`}/>)
                                                        }
                                                    &lt;/Fragment>
                                                );
                                            } else {
                                                return (
                                                    &lt;Fragment>
                                                        &lt;Typography
                                                            styles={{marginBottom: '5rem'}}
                                                            as={'h3'}
                                                            size={'large'}
                                                            fontWeight={'bold'}
                                                            textAlign={'center'}
                                                        >
                                                            {translate('verify_not_matches_found')}
                                                        &lt;/Typography>

                                                    &lt;/Fragment>
                                                );
                                            }
                                        }
                                    }
                                &lt;/Query>
                            }
                        &lt;/Column>
                    &lt;/Row>
                &lt;/Container>
                &lt;VerifyModal open={open} onModalToggle={this.onModalToggle}/>
            &lt;/Fragment>
        )
    }
}

const mapStateToProps = state => ({
    translate: getTranslate(state.locale),
    currentLanguage: state.locale ? getActiveLanguage(state.locale).code : null,
    preLoader: state.preLoader.toggle
});

const STYLE = () => {
    return {
        topLabel: {
            padding: '2rem 5rem !important',
        },
        topLabelIcon: {
            marginBottom: '3rem !important',
            height: '6.25rem',
        }
    }
};

VerifyPage = connectFela(STYLE)(VerifyPage);
VerifyPage = connect(mapStateToProps)(VerifyPage);

export default VerifyPage;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="LanguageSwitcher.html">LanguageSwitcher</a></li><li><a href="Verify.VerifyModal.html">VerifyModal</a></li><li><a href="Verify.VerifyPage.html">VerifyPage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addFlexMS">addFlexMS</a></li><li><a href="global.html#btnStyles">btnStyles</a></li><li><a href="global.html#createRoutes">createRoutes</a></li><li><a href="global.html#createStyleRenderer">createStyleRenderer</a></li><li><a href="global.html#currentLanguage">currentLanguage</a></li><li><a href="global.html#error">error</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li><li><a href="global.html#has">has</a></li><li><a href="global.html#hash">hash</a></li><li><a href="global.html#initLocalize">initLocalize</a></li><li><a href="global.html#instruction">instruction</a></li><li><a href="global.html#language">language</a></li><li><a href="global.html#languages">languages</a></li><li><a href="global.html#onModalToggle">onModalToggle</a></li><li><a href="global.html#open">open</a></li><li><a href="global.html#pristine">pristine</a></li><li><a href="global.html#rehydrateState">rehydrateState</a></li><li><a href="global.html#renderer">renderer</a></li><li><a href="global.html#reset">reset</a></li><li><a href="global.html#ROOT">ROOT</a></li><li><a href="global.html#setActiveLanguage">setActiveLanguage</a></li><li><a href="global.html#staticContext">staticContext</a></li><li><a href="global.html#styles">styles</a></li><li><a href="global.html#submitting">submitting</a></li><li><a href="global.html#translate">translate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Jun 01 2018 13:15:57 GMT+0300 (MSK)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
